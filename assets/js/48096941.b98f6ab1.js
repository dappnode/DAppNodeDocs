"use strict";(self.webpackChunkd_app_node_docs=self.webpackChunkd_app_node_docs||[]).push([[8756],{255:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"dev/notifications","title":"\ud83d\udd14 Package Notifications (Coming soon)","description":"Notifications are a way to inform users about events happening in the DAppNode. They are displayed in the notifications tab within the DAppNode UI. Notifications are sent by third-party software, \\"Gatus,\\" which monitors the services running in the DAppNode or arbitrary services that send notifications. Users can configure the notifications they want to receive and set thresholds (if applicable) for these notifications.","source":"@site/docs/dev/notifications.md","sourceDirName":"dev","slug":"/dev/notifications","permalink":"/docs/dev/notifications","draft":false,"unlisted":false,"editUrl":"https://github.com/dappnode/DappnodeDocs/edit/master/docs/dev/notifications.md","tags":[],"version":"current","frontMatter":{},"sidebar":"devSidebar","previous":{"title":"Package Metrics","permalink":"/docs/dev/metrics"},"next":{"title":"Package DNS","permalink":"/docs/dev/dns"}}');var o=i(74848),a=i(28453);const s={},c="\ud83d\udd14 Package Notifications (Coming soon)",r={},d=[{value:"<strong>Notification Structure</strong>",id:"notification-structure",level:2},{value:"<strong>Example Notification Payload</strong>",id:"example-notification-payload",level:3},{value:"<strong>Notifications Package API</strong>",id:"notifications-package-api",level:2},{value:"<strong>Example API Request</strong>",id:"example-api-request",level:3},{value:"<strong>Notifications Inbox</strong>",id:"notifications-inbox",level:2},{value:"<strong>Notifications Settings</strong>",id:"notifications-settings",level:2},{value:"<strong>Communication Channels</strong>",id:"communication-channels",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"-package-notifications-coming-soon",children:"\ud83d\udd14 Package Notifications (Coming soon)"})}),"\n",(0,o.jsxs)(t.p,{children:["Notifications are a way to inform users about events happening in the DAppNode. They are displayed in the ",(0,o.jsx)(t.a,{href:"http://dappmanager.dappnode/notifications",children:"notifications tab"}),' within the DAppNode UI. Notifications are sent by third-party software, "Gatus," which monitors the services running in the DAppNode or arbitrary services that send notifications. Users can configure the notifications they want to receive and set thresholds (if applicable) for these notifications.']}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsxs)(t.p,{children:["It is mandatory for users to install the ",(0,o.jsx)(t.a,{href:"https://github.com/dappnode/DNP_NOTIFICATIONS",children:"Notifications package"})," to receive notifications."]})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"notification-structure",children:(0,o.jsx)(t.strong,{children:"Notification Structure"})}),"\n",(0,o.jsx)(t.p,{children:"Each notification has a structure that includes the following fields:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"title"}),": The title of the notification. Part of the notification payload."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"body"}),": The body of the notification. Part of the notification payload."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"category"}),": The category of the notification, used to group notifications by type. Part of the notification payload."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"dnpName"}),": The DNP name of the package that sent the notification, used to identify the source package. Part of the notification payload."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"seen"}),": A boolean value indicating whether the notification has been seen by the user. This is handled automatically by the notifications package, with a default value of ",(0,o.jsx)(t.code,{children:"false"}),". It is set to ",(0,o.jsx)(t.code,{children:"true"})," once the user views the notification."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"timestamp"}),": The timestamp of when the notification was sent, used to sort notifications by date. This is automatically set by the notifications package when the notification is received."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"callToAction"}),": An optional field that includes a title and a URL, providing a link for the user to take action on the notification. Part of the notification payload.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"title"}),": The title of the call to action."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"url"}),": The URL for the call to action."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"errors"}),": An optional field that includes an error message, providing additional information about the notification. If provided, the notification will not be shown in the inbox. Part of the notification payload."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"icon"}),": An optional field that includes an icon URL, used to display an icon for the notification. If not provided, the icon of the package that sent the notification will be used. Part of the notification payload."]}),"\n"]}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h3,{id:"example-notification-payload",children:(0,o.jsx)(t.strong,{children:"Example Notification Payload"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "title": "string", // e.g., "Geth Ethereum Node Sync Status"\n  "body": "string", // e.g., "Geth Ethereum Node Syncing"\n  "category": "string", // e.g., "ethereum"\n  "dnpName": "string", // e.g., "geth.dnp.dappnode.eth"\n  "seen": false, // e.g., false\n  "timestamp": "string", // e.g., "2023-10-01T12:00:00Z"\n  "priority": "string", // e.g., "medium"\n  "status": "string", // e.g., "triggered"\n  "correlationId": "string", // e.g., "geth-eth-syncing"\n  "isBanner": false, // e.g., false\n  "callToAction": {\n    "title": "string", // e.g., "View Logs"\n    "url": "string" // e.g., "http://dappmanager.dappnode/packages/my/geth.dnp.dappnode.eth/logs"\n  },\n  "errors": "string", // e.g., "Error: no such host: geth.dappnode"\n  "icon": "string" // e.g., "https://gateway.ipfs.dappnode.io/ipfs/QmTVc5LQkTuaN3VxcteQ2E27pHSVJakE6XPo2FMxQTP284"\n}\n'})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"notifications-package-api",children:(0,o.jsx)(t.strong,{children:"Notifications Package API"})}),"\n",(0,o.jsx)(t.p,{children:"The notifications package exposes an API that allows other packages to send notifications. This API is a simple HTTP POST request that includes the notification structure as the body of the request. The API is available at the following URL:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"http://notifier.notifications.dappnode:8080/api/v1/notifications\n"})}),"\n",(0,o.jsx)(t.h3,{id:"example-api-request",children:(0,o.jsx)(t.strong,{children:"Example API Request"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:'curl -X POST \\\n  http://notifier.notifications.dappnode:8080/api/v1/notifications \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "title": "Test Notification",\n    "body": "This is a test notification sent with curl",\n    "category": "other",\n    "dnpName": "test.dnp.dappnode.eth",\n    "priority": "low",\n    "status": "triggered",\n    "callToAction": {\n      "title": "Hello World",\n      "url": "http://dappmanager.dappnode"\n    },\n    "correlationId": "testPkg-test",\n    "isBanner": false\n}\'\n'})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"notifications-inbox",children:(0,o.jsx)(t.strong,{children:"Notifications Inbox"})}),"\n",(0,o.jsxs)(t.p,{children:["The notifications inbox is a place where users can see all the notifications that have been sent to them. Notifications are grouped by category and can be filtered by date, ",(0,o.jsx)(t.code,{children:"dnpName"}),", and category. Users can also mark notifications as read or delete them."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Notifications-Inbox",src:i(96312).A+"",width:"3382",height:"1452"})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"notifications-settings",children:(0,o.jsx)(t.strong,{children:"Notifications Settings"})}),"\n",(0,o.jsx)(t.p,{children:"The notifications settings allow users to configure the notifications they want to receive. Users can enable or disable notifications for each category and set thresholds for each notification. Thresholds determine when a notification should be sent. For example, if a user wants to receive a notification when CPU usage exceeds 80%, they can set the threshold to 80%. If the CPU usage goes above 80%, a notification will be sent."}),"\n",(0,o.jsxs)(t.p,{children:["In order to have a slider in the UI to adjust the threshold of the notification, the (gatus) endpoint must have a ",(0,o.jsx)(t.code,{children:"metric"})," object. Yo can see it in the ",(0,o.jsx)(t.a,{href:"/docs/dev/references/notifications#example-gatus-endpoints",children:"Notifications file reference section"}),"."]}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsx)(t.p,{children:"Only a threshold per endpoint is supported. The value it will be extracted from the first entry from the conditions array. Updating the value of the slider in the UI will update also the value of that condition."})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Notifications-Settings",src:i(69417).A+"",width:"3388",height:"1762"})}),"\n",(0,o.jsx)(t.p,{children:"Furthermore, the notifications settings can be configured also during the installation process of the dappnode package."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Notifications-Settings-installer",src:i(72642).A+"",width:"1916",height:"1085"})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsx)(t.p,{children:"The notifications settings are persisted during the automatic update of the package."})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"communication-channels",children:(0,o.jsx)(t.strong,{children:"Communication Channels"})}),"\n",(0,o.jsx)(t.p,{children:"Currently, the only communication channel available is the DAppNode UI. However, there are plans to implement additional communication channels, with the following priorities:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Web push notifications"}),"\n",(0,o.jsx)(t.li,{children:"Telegram"}),"\n"]}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.p,{children:"Thanks for reading the guide! If you found some problem in the process, do not hesitate to contact us in Discord / Telegram."})]})}function l(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},96312:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/notifications-inbox-ebcd098f1dc2ffcbec4cd60f5ecb5aa5.png"},72642:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/notifications-settings-installer-3e96781f3464a4a74ee564c1940c4c6a.png"},69417:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/notifications-settings-4567c9bc82ce1191148277813181fc5b.png"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>c});var n=i(96540);const o={},a=n.createContext(o);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);