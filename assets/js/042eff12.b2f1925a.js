"use strict";(self.webpackChunkd_app_node_docs=self.webpackChunkd_app_node_docs||[]).push([[7849],{73929:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"user/staking/switch-clients","title":"Switch staking clients","description":"This guide explains how to switch execution and consensus clients on Dappnode for Ethereum, Gnosis, and Lukso networks. It includes detailed information about the switching process and expected waiting times for resynchronization and attestation.","source":"@site/docs/user/staking/switch-clients.md","sourceDirName":"user/staking","slug":"/user/staking/switch-clients","permalink":"/docs/user/staking/switch-clients","draft":false,"unlisted":false,"editUrl":"https://github.com/dappnode/DappnodeDocs/edit/master/docs/user/staking/switch-clients.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userSidebar","previous":{"title":"Earn with Staking","permalink":"/docs/user/staking/overview"},"next":{"title":"Mainnet","permalink":"/docs/user/staking/ethereum/solo/mainnet"}}');var s=i(74848),r=i(28453);const c={},o="Switch staking clients",l={},a=[{value:"General Information",id:"general-information",level:2},{value:"Execution client switch",id:"execution-client-switch",level:2},{value:"Consensus client switch",id:"consensus-client-switch",level:2},{value:"Blockchains sync time &amp; recommended disk space",id:"blockchains-sync-time--recommended-disk-space",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={admonition:"admonition",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"switch-staking-clients",children:"Switch staking clients"})}),"\n",(0,s.jsx)(n.p,{children:"This guide explains how to switch execution and consensus clients on Dappnode for Ethereum, Gnosis, and Lukso networks. It includes detailed information about the switching process and expected waiting times for resynchronization and attestation."}),"\n",(0,s.jsx)(n.h2,{id:"general-information",children:"General Information"}),"\n",(0,s.jsx)(n.p,{children:"Important considerations before switching clients:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Downtime:"})," Switching clients will result in temporary downtime and missed attestations."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sync Time:"})," New clients will need time to synchronize with the network."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Disk Space:"})," Ensure you have enough disk space for the new client before switching."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Backup:"})," Always backup your validator keys and wallet information before making any changes."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Basic Switching Process Overview"}),"\nThe following switching process applies to Ethereum, Gnosis and Lukso."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install new client."}),"\n",(0,s.jsx)(n.li,{children:"Go to the stakers tab in the left menu."}),"\n",(0,s.jsx)(n.li,{children:"Select the new client."}),"\n",(0,s.jsx)(n.li,{children:"Click on the Apply changes button."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"stakers tab",src:i(17955).A+"",width:"2866",height:"1570"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Wait for synchronization. You can view the sync process in the dashboard tab or inside the client package in the logs section.\n",(0,s.jsx)(n.img,{alt:"Dashboard",src:i(40887).A+"",width:"1844",height:"686"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What's happening during Sync?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Connecting to peers on the network"}),"\n",(0,s.jsx)(n.li,{children:"Downloading block headers and bodies"}),"\n",(0,s.jsx)(n.li,{children:"Processing and validating transactions"}),"\n",(0,s.jsx)(n.li,{children:"Building the state trie and other database structures"}),"\n",(0,s.jsx)(n.li,{children:"Executing all historical transactions"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verify correct operation"}),"\nGo to the new client package in the packages tab and check the logs section (Technical knowledge is needed to read the logs)\nGo to Beaconcha.in dashboard and check if your validators are active and attesting."]}),"\n",(0,s.jsx)(n.h2,{id:"execution-client-switch",children:"Execution client switch"}),"\n",(0,s.jsx)(n.p,{children:"The current execution clients supported in Dappnode are the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ethereum execution clients: Reth, Geth, Nethermind, Erigon and Besu"}),"\n",(0,s.jsx)(n.li,{children:"Gnosis execution clients: Nethermind and Erigon"}),"\n",(0,s.jsx)(n.li,{children:"Lukso execution client: Geth"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Switching execution clients is a ",(0,s.jsx)(n.strong,{children:"critical operation that can substantially impact attestation performance"})," due to the extensive sync time required. Additionally, it is important to consider that installing a new execution client demands significant disk space."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Sync time"}),(0,s.jsx)(n.th,{children:"Attestattion impact"}),(0,s.jsx)(n.th,{children:"Disk space required"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"12-48h"}),(0,s.jsx)(n.td,{children:"12-48h"}),(0,s.jsx)(n.td,{children:"+2 TB"})]})})]}),"\n",(0,s.jsx)(n.p,{children:"If the client was not downloaded and sync previously, an initial sync is needed. It typically takes from 12 to 48 hours depending on the client. All times mentioned here assume standard Solid State Disk storage and reasonable network conditions. Actual times may vary based on hardware, network conditions, and chain state. Attestation impact directly correlates with sync time plus small overhead for client initialization."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The sync process might ",(0,s.jsx)(n.strong,{children:"require high resources of your hardware"}),", do not worry if your CPU temperature reaches 100\xbaC or your CPU usage is +90%, it is normal during the sync process. It would be problematic only if it stays at these levels for several days. In this case check maintenance practices in this documentation."]})}),"\n",(0,s.jsx)(n.h2,{id:"consensus-client-switch",children:"Consensus client switch"}),"\n",(0,s.jsx)(n.p,{children:"The current consensus clients supported in Dappnode are the following:\nEthereum consensus clients: Lighthouse, Teku, Lodestar Nimbus and Prysm.\nGnosis consensus clients: Lighthouse, Teku, Lodestar and Nimbus\nLukso consensus clients: Teku and Prysm"}),"\n",(0,s.jsxs)(n.p,{children:["Switching consensus clients is a ",(0,s.jsx)(n.strong,{children:"quick action and the attestation impact is limited"}),". Consensus clients do not require a lot of space to run properly."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Sync time"}),(0,s.jsx)(n.th,{children:"Attestattion impact"}),(0,s.jsx)(n.th,{children:"Disk space required"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"10 min"}),(0,s.jsx)(n.td,{children:"30 min"}),(0,s.jsx)(n.td,{children:"+30 GB"})]})})]}),"\n",(0,s.jsxs)(n.p,{children:["All consensus clients have a ",(0,s.jsx)(n.strong,{children:"sync time of 5-10 minutes"})," max thanks to checkpoint sync.\nCheckpoint sync helps to connect to the current state of the blockchain getting the data from an external node, so it does not need to start from scratch, reducing the time of synchronization significantly."]}),"\n",(0,s.jsx)(n.p,{children:"It is always advisable to switch to a new consensus client from scratch (without existent volumes) to trigger the checkpoint sync. Otherwise, if you have a client with previous blockchain data, it will require more time to sync."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"After sync time completes, it has an extra downtime of 1-3 epochs (6 - 18 minutes). This is the \u201cdoppelganger\u201d check, an extra protection measure to avoid slashing."})}),"\n",(0,s.jsx)(n.h2,{id:"blockchains-sync-time--recommended-disk-space",children:"Blockchains sync time & recommended disk space"}),"\n",(0,s.jsx)(n.p,{children:"The sync time varies depending on the blockchain selected to run your validators."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Blockchain"}),(0,s.jsx)(n.th,{children:"Sync time"}),(0,s.jsx)(n.th,{children:"Disk space recommended"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ethereum"}),(0,s.jsx)(n.td,{children:"12-48 h"}),(0,s.jsx)(n.td,{children:"+1.5 TB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Gnosis"}),(0,s.jsx)(n.td,{children:"8-16 h"}),(0,s.jsx)(n.td,{children:"+0.5 TB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Lukso"}),(0,s.jsx)(n.td,{children:"4-12 h"}),(0,s.jsx)(n.td,{children:"+0.5 TB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hoodi"}),(0,s.jsx)(n.td,{children:"2-4 h"}),(0,s.jsx)(n.td,{children:"+0.5 TB"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Plan Your Switch"}),": Choose a time with low network activity for switching to minimize the impact of missed attestations."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Don't Delete Old Client Data Immediately:"})," Keep the data from your old client for a few days in case you need to switch back. If you want to keep the new client in the long term, we recommend deleting the previous client before installing the new one to ensure enough disk space"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Monitor Synchronization:"})," Use Dappnode's dashboard to monitor the synchronization progress of your new client."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verify Client Health:"})," After switching, verify that your new client is properly connected to the network and producing attestations in the package logs."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check Logs:"})," Regularly check the logs of your new client to ensure there are no errors or issues."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Update API Connections:"})," If you have any external tools connecting to your node, update their connection settings to point to the new client."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Enable Dappnode notifications:"})," Push notifications can help to track the status of your validators and clients."]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"Common Issues and Solutions"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"New Client Won't Start"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Check disk space availability (Go to Dashboard)"}),"\n",(0,s.jsx)(n.li,{children:"Verify port conflicts aren't occurring (Go to Support tab/ Ports)"}),"\n",(0,s.jsx)(n.li,{children:"Ensure JWT token is correctly configured (Go to Package info)"}),"\n"]})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"Synchronization Takes Too Long"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Check your internet connection speed"}),"\n",(0,s.jsx)(n.li,{children:"Verify sufficient disk I/O performance (use SSD)"}),"\n",(0,s.jsx)(n.li,{children:"Restart client in the package to refresh peer connections"}),"\n",(0,s.jsx)(n.li,{children:"Delete the volumes of the client package to trigger Checkpoint sync"}),"\n"]})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"Missing Attestations After Switch"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify execution and consensus clients are properly connected"}),"\n",(0,s.jsx)(n.li,{children:"Check that validator keys were correctly imported"}),"\n",(0,s.jsx)(n.li,{children:"Ensure the beacon chain is fully synced"}),"\n"]})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"API Connection Errors"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify API endpoints are correctly configured"}),"\n",(0,s.jsx)(n.li,{children:"Check firewall settings"}),"\n",(0,s.jsx)(n.li,{children:"Ensure proper authentication is configured"}),"\n"]})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("b",{children:"High Resource Usage"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Different clients have different resource profiles"}),"\n",(0,s.jsx)(n.li,{children:"Hardware Maintenance (cleaning dust\u2026)"}),"\n",(0,s.jsx)(n.li,{children:"Consider hardware upgrades if consistently overloaded"}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:"If you are experiencing a different problem, you can:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ask the community in the support channel in Discord."}),"\n",(0,s.jsxs)(n.li,{children:["Subscribe to ",(0,s.jsx)(n.strong,{children:"Dappnode Premium"})," to be guided by a Dappnode team member personally."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},40887:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/dashboard-d5fcdb44451606f0719f2cc138187c1c.png"},17955:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/stakerstab-c3ae3999bd921b68b0d7c4c3e712e9ba.png"},28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var t=i(96540);const s={},r=t.createContext(s);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);