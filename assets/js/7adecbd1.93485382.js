"use strict";(self.webpackChunkd_app_node_docs=self.webpackChunkd_app_node_docs||[]).push([[8244],{97969:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"user/rollups/aztec","title":"\ud83d\ude80 Becoming an Aztec Sequencer with DAppNode","description":"Your comprehensive guide to setting up and joining the Aztec network as a sequencer using DAppNode infrastructure. Let\'s get you sequencing! \ud83c\udfaf","source":"@site/docs/user/rollups/aztec.md","sourceDirName":"user/rollups","slug":"/user/rollups/aztec","permalink":"/docs/user/rollups/aztec","draft":false,"unlisted":false,"editUrl":"https://github.com/dappnode/DappnodeDocs/edit/master/docs/user/rollups/aztec.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userSidebar","previous":{"title":"Optimism","permalink":"/docs/user/rollups/optimism"},"next":{"title":"Overview","permalink":"/docs/user/packages/understanding-dappnode-packages/overview"}}');var r=t(74848),o=t(28453);const a={},i="\ud83d\ude80 Becoming an Aztec Sequencer with DAppNode",c={},d=[{value:"\ud83d\udce6 Phase 1: Install DAppNode Package",id:"-phase-1-install-dappnode-package",level:2},{value:"\ud83d\udd10 Phase 2: Generate Your Keystore",id:"-phase-2-generate-your-keystore",level:2},{value:"Step 1\ufe0f\u20e3: Install Aztec CLI on Your Local Machine",id:"step-1\ufe0f\u20e3-install-aztec-cli-on-your-local-machine",level:3},{value:"Step 2\ufe0f\u20e3: Add Aztec CLI to Your PATH",id:"step-2\ufe0f\u20e3-add-aztec-cli-to-your-path",level:3},{value:"Step 3\ufe0f\u20e3: Generate Your Keystore",id:"step-3\ufe0f\u20e3-generate-your-keystore",level:3},{value:"Step 4\ufe0f\u20e3: Upload Keystore to DAppNode",id:"step-4\ufe0f\u20e3-upload-keystore-to-dappnode",level:3},{value:"\u2705 Phase 3: Approve STAKE Token Spending",id:"-phase-3-approve-stake-token-spending",level:2},{value:"Step 1\ufe0f\u20e3: Execute the Approval Transaction",id:"step-1\ufe0f\u20e3-execute-the-approval-transaction",level:3},{value:"\ud83d\udcb0 Phase 4: Fund Your Attester",id:"-phase-4-fund-your-attester",level:2},{value:"Attester ETH Funding \ud83d\udcb8",id:"attester-eth-funding-",level:3},{value:"\ud83c\udf96\ufe0f Phase 5: Join as a Sequencer",id:"\ufe0f-phase-5-join-as-a-sequencer",level:2},{value:"\ud83d\udd12 Security Best Practices",id:"-security-best-practices",level:2},{value:"\ud83c\udd98 Troubleshooting",id:"-troubleshooting",level:2},{value:"\ud83c\udfaf You&#39;ve Got This",id:"-youve-got-this",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"-becoming-an-aztec-sequencer-with-dappnode",children:"\ud83d\ude80 Becoming an Aztec Sequencer with DAppNode"})}),"\n",(0,r.jsx)(n.p,{children:"Your comprehensive guide to setting up and joining the Aztec network as a sequencer using DAppNode infrastructure. Let's get you sequencing! \ud83c\udfaf"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-phase-1-install-dappnode-package",children:"\ud83d\udce6 Phase 1: Install DAppNode Package"}),"\n",(0,r.jsx)(n.p,{children:"Start by grabbing the Aztec package from the DAppStore. This sets up your sequencer environment all nice and integrated with your DAppNode setup."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-phase-2-generate-your-keystore",children:"\ud83d\udd10 Phase 2: Generate Your Keystore"}),"\n",(0,r.jsx)(n.h3,{id:"step-1\ufe0f\u20e3-install-aztec-cli-on-your-local-machine",children:"Step 1\ufe0f\u20e3: Install Aztec CLI on Your Local Machine"}),"\n",(0,r.jsx)(n.p,{children:"Download and install the Aztec Command Line Interface (it's quick, I promise):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bash -i <(curl -s https://install.aztec.network)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2\ufe0f\u20e3-add-aztec-cli-to-your-path",children:"Step 2\ufe0f\u20e3: Add Aztec CLI to Your PATH"}),"\n",(0,r.jsx)(n.p,{children:"Make the Aztec CLI globally accessible by adding it to your shell configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"echo 'export PATH=\"$HOME/.aztec/bin:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3\ufe0f\u20e3-generate-your-keystore",children:"Step 3\ufe0f\u20e3: Generate Your Keystore"}),"\n",(0,r.jsxs)(n.p,{children:["Time to create your secure keystore! \ud83d\udee1\ufe0f You can go with either an automatically generated 12-word mnemonic or your own custom passphrase. ",(0,r.jsx)(n.strong,{children:"We strongly recommend rolling with a self-determined mnemonic of at least 24 words"})," for maximum security. Treat it like your most prized possession\u2014store it securely in a password manager or encrypted vault and never share it with a soul!"]}),"\n",(0,r.jsxs)(n.p,{children:["For all the juicy details on keystore generation, check out the ",(0,r.jsx)(n.a,{href:"https://docs.aztec.network/devnet/the_aztec_network/operation/keystore",children:"official Aztec keystore documentation"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'aztec validator-keys new \\\n  --fee-recipient 0x0000000000000000000000000000000000000000000000000000000000000000 \\\n  --staker-output \\\n  --gse-address 0xfb243b9112bb65785a4a8edaf32529accf003614 \\  # Check in Aztec\'s documentation for the correct GSE address\n  --mnemonic "<MNEMONIC>" \\\n  --l1-rpc-urls http://geth.sepolia-geth.dappnode:8545 \\  # or any execution RPC\n  --data-dir ./\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Please note that ",(0,r.jsx)(n.code,{children:"--fee-recipient"})," needs to be an Aztec address, not an Ethereum address. It's OK to leave it as 0x00... for now because there are no txs in the Ignition phase (so no tx fees) and can be changed later."]}),"\n",(0,r.jsx)(n.h3,{id:"step-4\ufe0f\u20e3-upload-keystore-to-dappnode",children:"Step 4\ufe0f\u20e3: Upload Keystore to DAppNode"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to your ",(0,r.jsx)(n.strong,{children:"DAppNode Packages Tab"})," \ud83d\udcc1"]}),"\n",(0,r.jsxs)(n.li,{children:["Open the ",(0,r.jsx)(n.strong,{children:"Aztec package"})," \ud83e\udd86"]}),"\n",(0,r.jsxs)(n.li,{children:["Access the ",(0,r.jsx)(n.strong,{children:"File Manager"})," tab \ud83d\udcc1"]}),"\n",(0,r.jsxs)(n.li,{children:["Upload your newly generated keystore file to the ",(0,r.jsx)(n.code,{children:"/keystore"})," directory"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Boom! \ud83d\udca5 Your keystore is now locked and loaded, ready for your Aztec sequencer to use."}),"\n",(0,r.jsx)(n.p,{children:"If your logs show this error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-log",children:'[17:55:44.683] WARN: node:blob-sink:client Unable to get blob sidecar for XXXXXXX: Not Found (404) {"status":404,"statusText":"Not Found","body":"{\\"message\\":\\"Block not found: the node does not custody enough data columns to reconstruct blobs - please start the beacon node with the `--subscribe-all-data-subnets` flag to ensure this call to succeed, or retry later if it is already the case\\",\\"code\\":404}"}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Make sure to add ",(0,r.jsx)(n.code,{children:"--subscribe-all-data-subnets"})," in your Beacon Chain package:"]}),"\n",(0,r.jsx)("img",{width:"1227",height:"528",alt:"Screenshot 2025-11-12 at 15 00 40",src:"https://github.com/user-attachments/assets/2d319f55-72e3-4ba4-a09b-b642b0c02369"}),"\n",(0,r.jsx)("img",{width:"1051",height:"298",alt:"Screenshot 2025-11-12 at 14 58 47",src:"https://github.com/user-attachments/assets/29228b57-ba10-4a59-bb30-fb31a3442e48"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-phase-3-approve-stake-token-spending",children:"\u2705 Phase 3: Approve STAKE Token Spending"}),"\n",(0,r.jsx)(n.p,{children:"Before you can join the party as a sequencer, you gotta approve the Aztec rollup contract to spend 200,000 STAKE tokens. That's your ticket to the show! \ud83c\udfab"}),"\n",(0,r.jsx)(n.p,{children:"In order to perform this step you will need to install foundry in your computer (there will be a UI later on to perform this step, but for now you'll need to use CLI)."}),"\n",(0,r.jsxs)(n.p,{children:["You can install foundry following ",(0,r.jsx)(n.a,{href:"https://github.com/foundry-rs/foundry",children:"the instructions in their repo"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -L https://foundry.paradigm.xyz | bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-1\ufe0f\u20e3-execute-the-approval-transaction",children:"Step 1\ufe0f\u20e3: Execute the Approval Transaction"}),"\n",(0,r.jsx)(n.p,{children:"Now execute the approval transaction from within the container:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'cast send 0x139d2a7a0881e16332d7D1F8DB383A4507E1Ea7A \\\n  "approve(address,uint256)" \\\n  0xebd99ff0ff6677205509ae73f93d0ca52ac85d67 \\\n  200000ether \\\n  --private-key "$PRIVATE_KEY_OF_OLD_SEQUENCER" \\\n  --rpc-url http://execution.sepolia.dncore.dappnode:8545\n'})}),"\n",(0,r.jsx)(n.p,{children:"Sit tight \u23f3 and wait for the transaction to be confirmed on-chain. Grab some coffee \u2615 while you wait!"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-phase-4-fund-your-attester",children:"\ud83d\udcb0 Phase 4: Fund Your Attester"}),"\n",(0,r.jsxs)(n.p,{children:["Your attester address has been generated with the command in Step 3\ufe0f\u20e3. Specifically in the ",(0,r.jsx)(n.code,{children:"keyn_attestern_staker_output.json"}),", where ",(0,r.jsx)(n.code,{children:"n"})," is the index of the key you've generated (1, for most of us who only generate 1).\nOpen the ",(0,r.jsx)(n.code,{children:"...staker_output.json"}),' file and you will find the address in the "attester" field.']}),"\n",(0,r.jsx)(n.h3,{id:"attester-eth-funding-",children:"Attester ETH Funding \ud83d\udcb8"}),"\n",(0,r.jsxs)(n.p,{children:["Make sure your Attester Ethereum address has enough ETH to cover gas fees. Grab some from a testnet faucet or transfer from your funded account.\nFaucets for testnet ",(0,r.jsx)(n.a,{href:"https://sepolia-faucet.pk910.de/",children:"here"})," and ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/application/web3/faucet/ethereum/sepolia",children:"here"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-phase-5-join-as-a-sequencer",children:"\ud83c\udf96\ufe0f Phase 5: Join as a Sequencer"}),"\n",(0,r.jsx)(n.p,{children:"Alright, moment of truth! \ud83c\udfac Let's register your validator on the Aztec network using the CLI."}),"\n",(0,r.jsx)(n.p,{children:"Run this bad boy replacing the placeholders with your data and become a sequencer:"}),"\n",(0,r.jsxs)(n.p,{children:["Note: ",(0,r.jsx)(n.code,{children:"bls-secret-key"})," can be found in the file ",(0,r.jsx)(n.code,{children:"key1.json"}),' under the "bls" section.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aztec \\\n  add-l1-validator \\\n  --l1-rpc-urls http://execution.sepolia.dncore.dappnode:8545 \\\n  --network testnet \\\n  --private-key $PRIVATE_KEY_OF_OLD_SEQUENCER \\\n  --attester $ETH_ATTESTER_ADDRESS \\\n  --withdrawer $ANY_ETH_ADDRESS \\\n  --bls-secret-key $BLS_ATTESTER_PRIV_KEY \\\n  --rollup 0xebd99ff0ff6677205509ae73f93d0ca52ac85d67\n"})}),"\n",(0,r.jsx)(n.p,{children:"Success! \ud83c\udf89 Your sequencer is now registered on the Aztec testnet and ready to start producing blocks. Welcome to the sequencer club! \ud83c\udfc6"}),"\n",(0,r.jsxs)(n.p,{children:["You can check the status of your sequencer in ",(0,r.jsx)(n.a,{href:"https://testnet.dashtec.xyz",children:"Dashtec"}),'. Remember that what is called "Sequencer address" in the dashboard is the "Attester" address in your ',(0,r.jsx)(n.code,{children:"...staker_output.json"})," file."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-security-best-practices",children:"\ud83d\udd12 Security Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udeab Never ever share"})," your mnemonic or private keys with anyone, period"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd10 Lock down that mnemonic"})," \u2014 use a dedicated password manager or encrypted storage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcbc Hardware wallet time"})," \u2014 consider using hardware wallets for your withdrawal and attester addresses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83e\uddea Test first"})," \u2014 run everything through testnet before going anywhere near mainnet"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udc40 Keep an eye"})," on your sequencer logs regularly through DAppNode's dashboard"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83c\udd98 Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:"Running into issues? Here's a quick troubleshooting guide:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Keystore Upload Fails"})," \ud83d\udce4 \u2014 Make sure the file's in proper JSON format and has the right permissions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSH Connection Failed"})," \ud83d\udd13 \u2014 Verify your DAppNode is running and accessible on your network, check firewall settings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docker Container Not Found"})," \ud83d\udc33 \u2014 Ensure the Aztec package is installed and running, check the package name matches your network (e.g., ",(0,r.jsx)(n.code,{children:"aztec-sepolia"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Approval Transaction Reverts"})," \u274c \u2014 Check that you've got enough ETH for gas and sufficient STAKE balance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI Connection Errors"})," \ud83d\udd0c \u2014 Verify your ETH RPC URL is actually reachable and the network's responding from within the container"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-youve-got-this",children:"\ud83c\udfaf You've Got This"}),"\n",(0,r.jsx)(n.p,{children:"You're all set to become an Aztec sequencer. Follow these steps carefully, keep your keys safe, and you'll be sequencing like a pro in no time. Happy validating! \ud83d\ude80\u2728"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(96540);const r={},o=s.createContext(r);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);