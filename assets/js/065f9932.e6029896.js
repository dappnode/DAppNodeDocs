"use strict";(self.webpackChunkd_app_node_docs=self.webpackChunkd_app_node_docs||[]).push([[1937],{3965:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"dev/dns","title":"\ud83c\udf10 DNS","description":"By default, every DAppNode package runs on the Docker network dncore_network and uses the default Docker DNS server for name resolution. During installation, the package is assigned a unique domain name (apart from the ones set by default by Docker: container name, service name, etc.) that can be used to access the services running inside the package. This document provides a comprehensive guide on how to access services running inside a package using the assigned domain name.","source":"@site/docs/dev/dns.md","sourceDirName":"dev","slug":"/dev/dns","permalink":"/docs/dev/dns","draft":false,"unlisted":false,"editUrl":"https://github.com/dappnode/DappnodeDocs/edit/master/docs/dev/dns.md","tags":[],"version":"current","frontMatter":{},"sidebar":"devSidebar","previous":{"title":"Package Notifications","permalink":"/docs/dev/notifications"},"next":{"title":"Github Actions","permalink":"/docs/dev/github-actions"}}');var i=a(4848),c=a(8453);const o={},d="\ud83c\udf10 DNS",r={},t=[{value:"Multiservice packages",id:"multiservice-packages",level:2},{value:"Monoservice packages",id:"monoservice-packages",level:2},{value:"Staker packages - fullnode",id:"staker-packages---fullnode",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-dns",children:"\ud83c\udf10 DNS"})}),"\n",(0,i.jsxs)(n.p,{children:["By default, every DAppNode package runs on the Docker network ",(0,i.jsx)(n.code,{children:"dncore_network"})," and uses the default Docker DNS server for name resolution. During installation, the package is assigned a unique domain name (apart from the ones set by default by Docker: container name, service name, etc.) that can be used to access the services running inside the package. This document provides a comprehensive guide on how to access services running inside a package using the assigned domain name."]}),"\n",(0,i.jsx)(n.h2,{id:"multiservice-packages",children:"Multiservice packages"}),"\n",(0,i.jsxs)(n.p,{children:["In multiservice packages, the naming convention is: ",(0,i.jsx)(n.code,{children:"<serviceName>.<shortDnpName>.dappnode"}),", where ",(0,i.jsx)(n.code,{children:"serviceName"})," is the name of the service running inside the package and ",(0,i.jsx)(n.code,{children:"shortDnpName"})," is the name of the package. For example, if you have a package named ",(0,i.jsx)(n.code,{children:"my-package"})," running a service named ",(0,i.jsx)(n.code,{children:"my-service"}),", the domain name to access the service would be ",(0,i.jsx)(n.code,{children:"my-service.my-package.dappnode"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The short DNP name is derived from the first part of the DNP name, which corresponds to the package name. For example, if the DNP name is ",(0,i.jsx)(n.code,{children:"my-package.dnp.dappnode.eth"}),", the short DNP name would be ",(0,i.jsx)(n.code,{children:"my-package"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example multiservice:"})," ",(0,i.jsx)(n.a,{href:"https://github.com/dappnode/DAppNodePackage-prysm-generic",children:"Prysm"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["DNP name: ",(0,i.jsx)(n.code,{children:"prysm.dnp.dappnode.eth"})]}),"\n",(0,i.jsx)(n.li,{children:"Docker Compose"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: "3.5"\nservices:\n  beacon-chain:\n    build:\n      context: beacon-chain\n      args:\n    volumes:\n      - beacon-chain-data:/data\n    restart: unless-stopped\n    environment:\n  validator:\n    build:\n      context: validator\n      args:\n    restart: on-failure\n    environment:\nvolumes:\n  beacon-chain-data: {}\n  validator-data: {}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Aliases will be:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["beacon-chain service: ",(0,i.jsx)(n.code,{children:"beacon-chain.prysm.dnp.dappnode"})]}),"\n",(0,i.jsxs)(n.li,{children:["validator service: ",(0,i.jsx)(n.code,{children:"validator.prysm.dnp.dappnode"})]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["A main service can be defined in a multiservice package. This service will be the one used to access the package. For example, if you have a package named ",(0,i.jsx)(n.code,{children:"my-package"})," running a service named ",(0,i.jsx)(n.code,{children:"my-service"})," and you want to access the package using the domain name ",(0,i.jsx)(n.code,{children:"my-package.dappnode"}),", you can define the service ",(0,i.jsx)(n.code,{children:"my-service"})," as the main service. See ",(0,i.jsx)(n.a,{href:"https://docs.dappnode.io/docs/dev/references/manifest#mainservice",children:"manifest file reference - mainService"})," for details on how to define the main service."]})}),"\n",(0,i.jsx)(n.h2,{id:"monoservice-packages",children:"Monoservice packages"}),"\n",(0,i.jsxs)(n.p,{children:["In monoservice packages, the domain name is the same as the package name. For example, if you have a package named ",(0,i.jsx)(n.code,{children:"my-package"}),", the domain name to access the service would be ",(0,i.jsx)(n.code,{children:"my-package.dappnode"}),". It also follows the same convention as the multiservice packages. For example, if you have a package named ",(0,i.jsx)(n.code,{children:"my-package"})," running only one service named ",(0,i.jsx)(n.code,{children:"my-service"}),", the domain name to access the service would be ",(0,i.jsx)(n.code,{children:"my-service.my-package.dappnode"})," or ",(0,i.jsx)(n.code,{children:"my-package.dappnode"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example monoservice:"})," ",(0,i.jsx)(n.a,{href:"https://github.com/dappnode/DAppNodePackage-geth-generic",children:"Geth"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["DNP name: ",(0,i.jsx)(n.code,{children:"geth.dnp.dappnode.eth"})]}),"\n",(0,i.jsx)(n.li,{children:"Docker Compose"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: "3.5"\nservices:\n  geth:\n    build:\n      context: geth\n      args:\n    environment:\n    restart: unless-stopped\n'})}),"\n",(0,i.jsx)(n.p,{children:"Alias will be:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["geth service: ",(0,i.jsx)(n.code,{children:"geth.dnp.dappnode"})," and ",(0,i.jsx)(n.code,{children:"geth.dnp.dappnode.eth"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"staker-packages---fullnode",children:"Staker packages - fullnode"}),"\n",(0,i.jsx)(n.p,{children:"Staker packages are a special case in DAppNode. They follow the same DNS conventions mentioned above, with some additional features:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"EVMs dedicated Docker networks"}),": Each EVM network supported in DAppNode has a dedicated Docker network that is used by the staker packages to communicate with each other. The Docker network name follows the convention ",(0,i.jsx)(n.code,{children:"<network>_network"}),", e.g., ",(0,i.jsx)(n.code,{children:"hoodi_network"})," for the Hoodi network or ",(0,i.jsx)(n.code,{children:"mainnet_network"})," for the Mainnet network."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fullnode aliases"}),": The selected Execution and Consensus client has an extra domain name to indicate that it is the client selected by the user. This domain name can be used by other packages to query the RPC node, the validator API, the beacon chain API, etc. (in some cases, it might require authentication). The naming convention is:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Execution: ",(0,i.jsx)(n.code,{children:"execution.<network>.dncore.dappnode"}),", e.g., ",(0,i.jsx)(n.code,{children:"execution.mainnet.dncore.dappnode"})]}),"\n",(0,i.jsxs)(n.li,{children:["Consensus:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Beacon-chain: ",(0,i.jsx)(n.code,{children:"beacon-chain.<network>.dncore.dappnode"}),", e.g., ",(0,i.jsx)(n.code,{children:"beacon-chain.mainnet.dncore.dappnode"})]}),"\n",(0,i.jsxs)(n.li,{children:["Validator: ",(0,i.jsx)(n.code,{children:"validator.<network>.dncore.dappnode"}),", e.g., ",(0,i.jsx)(n.code,{children:"validator.mainnet.dncore.dappnode"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The fullnode alias is added to both Docker networks, ",(0,i.jsx)(n.code,{children:"dncore_network"})," and ",(0,i.jsx)(n.code,{children:"<network>_network"}),", so it can be accessed from any package running in the DAppNode."]})})]})}function l(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>d});var s=a(6540);const i={},c=s.createContext(i);function o(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);